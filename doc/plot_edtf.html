<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Create an aoristic analysis of cultural heritage threats from...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body><div class="container">

<table width="100%" summary="page for plot_edtf"><tr><td>plot_edtf</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Create an aoristic analysis of cultural heritage threats from a dataset.</h2>

<h3>Description</h3>

<p>Use an XLSX file where cultural threats are listed and dated with EDTF. Create a flat chart or a Plotly one.
</p>


<h3>Usage</h3>

<pre>
plot_edtf(
  data_file = paste0(system.file(package = "eamenaR"),
    "/extdata/disturbances_edtf.xlsx"),
  date_column = "EDTF",
  site_column = "S_ID",
  analyse_column = "Disturbance.Type",
  rm_date = NA,
  edft_limits = "2004-01-01..2019-12-31",
  edtf_unit = "ymd",
  edtf_analyse = c("all", "category"),
  edft_round = 4,
  id.filter = NA,
  type.plot = c("plotly"),
  freeze_y = FALSE,
  export.plot = FALSE,
  file_out = "df_out",
  dirOut = paste0(system.file(package = "eamenaR"), "/results/")
)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>data_file</code></td>
<td>
<p>the path to the dataset. By default an XLSX file: &quot;disturbances_edtf.xlsx&quot;.</p>
</td></tr>
<tr valign="top"><td><code>date_column</code></td>
<td>
<p>the column of the EDTF data.</p>
</td></tr>
<tr valign="top"><td><code>site_column</code></td>
<td>
<p>the column of the sites' names or sites' IDs.</p>
</td></tr>
<tr valign="top"><td><code>analyse_column</code></td>
<td>
<p>the field name of the threat category that will be analysed: &quot;Disturbance.Type&quot; (default), or &quot;Disturbance.Cause&quot;.</p>
</td></tr>
<tr valign="top"><td><code>rm_date</code></td>
<td>
<p>the EDTF pattern dates that will be removed, for example c(&quot;..&quot;) removes all dates that 'occurred before' or 'occurred after'; c(&quot;:&quot;) will remove intervals; etc. By default NA</p>
</td></tr>
<tr valign="top"><td><code>edtf_unit</code></td>
<td>
<p>the time unit of analysis: &quot;ymd&quot; = years, months and days (default); &quot;ym&quot; = years and months; &quot;y&quot; = year.</p>
</td></tr>
<tr valign="top"><td><code>edtf_analyse</code></td>
<td>
<p>type of analysis. If &quot;all&quot; will sum the different categories of threats, if &quot;category&quot; will plot all categories of threats separately, on a same graphic. By default both: 'edtf_analyse = c(&quot;all&quot;, &quot;category&quot;)'</p>
</td></tr>
<tr valign="top"><td><code>edft_round</code></td>
<td>
<p>round precision for density, default 4 decimal places.</p>
</td></tr>
<tr valign="top"><td><code>id.filter</code></td>
<td>
<p>if not NA, will filter on this subset of sites (e.g. 'id.filter = c(&quot;AM009&quot;)')</p>
</td></tr>
<tr valign="top"><td><code>type.plot</code></td>
<td>
<p>file extension of the plot to be exported. Either &quot;plotly&quot; for a dynamic HTML plot, or &quot;png&quot; for a static plot.</p>
</td></tr>
<tr valign="top"><td><code>freeze_y</code></td>
<td>
<p>if TRUE, will freeze the Y-axis on the maximum value of the density. The default this option is FALSE.</p>
</td></tr>
<tr valign="top"><td><code>export.plot</code></td>
<td>
<p>if TRUE, saves the plot, if FALSE (default), displays the plot.</p>
</td></tr>
<tr valign="top"><td><code>file_out</code></td>
<td>
<p>the name of the plot that will be created if 'export.plot' is TRUE</p>
</td></tr>
<tr valign="top"><td><code>edtf_limits</code></td>
<td>
<p>the min and max dates of the time analysis. This interval will be crossed with the boundaries of the dataset. Useful when threats are recorded &quot;before&quot; (end date) or &quot;after&quot; (start date) a specific date.</p>
</td></tr>
<tr valign="top"><td><code>dataOut</code></td>
<td>
<p>the path to the folder where the plot file will be created if 'export.plot' is TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>One to several plots
</p>


<h3>Examples</h3>

<pre>

# plot by category on "Disturbance Type" column (by default), grouped by month
library(dplyr)
plot_edtf(edtf_unit = "ym", edtf_analyse = "category")

# same thing but without the EDTF dates tagged as occurred before/after, and Y-axis freezed
plot_edtf(edtf_unit = "ym", edtf_analyse = "category", rm_date = "..", freeze_y = T)

</pre>


</div></body></html>
